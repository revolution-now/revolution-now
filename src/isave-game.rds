# ===============================================================
# isave-game.rds
#
# Project: Revolution Now
#
# Created by David P. Sicilia on 2024-04-06.
#
# Description: Interface for the save-game module.
#
# ===============================================================
# Module header.
include "save-game.hpp"

# base
include "base/expect.hpp"
include "base/fs.hpp"
include "base/no-discard.hpp"

namespace "rn"

# ===============================================================
# IGameSaver
# ===============================================================
interface.IGameSaver {
  save_to_slot_interactive {
    returns 'wait_bool',
    slot 'int',
  },

  save_to_slot {
    returns 'base::expect<fs::path>',
    slot 'int',
  },

  _context {
    ss 'SSConst const&',
    gui 'IGui&',
    saver 'IGameStorageSave const&',
    saved 'RootState&',
  },
}

# This one just writes or copies the game but without doing a
# proper save, i.e. no checkpointing.
interface.IGameWriter {
  save_to_slot_no_checkpoint {
    returns 'base::expect<fs::path>',
    slot 'int',
  },

  copy_slot_to_slot {
    returns 'base::expect<SlotCopiedPaths>',
    src_slot 'int',
    dst_slot 'int',
  },

  _context {
    saver 'IGameStorageSave const&',
  },
}
