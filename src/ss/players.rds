# ===============================================================
# sg-players.rds
#
# Project: Revolution Now
#
# Created by dsicilia on 2022-02-12.
#
# Description: RDS definitions for the sg-players module.
#
# ===============================================================
# gs
include "ss/nation.rds.hpp"
include "ss/player.rds.hpp"
include "ss/market.rds.hpp"

# refl
include "refl/enum-map.hpp"

namespace "rn"

struct.PlayersState {
  players 'refl::enum_map<e_nation, maybe<Player>>',

  # These are the nations that will be played by the human
  # player. Normally there is only one such nation, but in cheat
  # mode an arbitrary set can be enabled. When a nation's turn
  # arrives and its flag is true here then it will be set as the
  # current human nation before starting its turn. During another
  # nation's turn, a given nation is always an AI player, e.g.
  # for the purpose of diplomacy.
  humans 'refl::enum_map<e_nation, bool>',

  # There can be at most one human player at any given moment. If
  # the active player is a human player then that active player
  # will be the designated human player. If the active player is
  # not a human player then this holds the human. In a normal
  # game this is just the nation that the player chose when
  # starting the game, and it never changes. When cheat mode is
  # enabled, however, one can enable multiple nations as human,
  # and in that case this becomes more meaningful as it deter-
  # mines who is the designated human player when an AI player is
  # moving. If this does not have a value then all players must
  # be AI players. If it does have a value then it must be a na-
  # tion that is listed in the `humans` map above.
  default_human 'base::maybe<e_nation>',

  # Market state that is shared by all nations.
  global_market_state 'GlobalMarketState',

  _features { equality, validation }
}
