Notes:

  * When the intervention force can't find an ocean spot (with
    sea lane access) adjacent to a colony that is available for
    friendly units then it will not deliver on that turn.

  * The intervention force moves (i.e. arrives) after the REF
    move:

       1. Natives.
       2. Euro players.
       3. REF.
       4. Intervention force.

  * The triggering of the intervention force is checked during
    the intervention force's turn. If it is sent then it begins
    that very turn (immediately).

  * The number of liberty bells needed for intervention:

        Discoverer:   2000
        Explorer:     3500
        Conquistador: 5000
        Governor:     6500
        Viceroy:      8000

    The SG claims that this number is equal to the number of
    bells that would have been needed for the next founding fa-
    ther, but this doesn't seem to be the case. It is just deter-
    mined by difficulty level and is a relatively large value.

  * Bells generated by REF-captured colonies don't count toward
    the intervention force (should be verified, but very likely
    true, or at least should be true; the SG implies this).

  * The King's expeditionary force expands whenever the nation's
    royal_money field hits a threshold.  It is increased by the
    following mechanism:

      Constant term per turn:
        Discoverer:   10
        Explorer:     18
        Conquistador: 26
        Governor:     34
        Viceroy:      42

      Any tax revenue received also adds to this:

        - Any sale of commodities in the harbor or through
          the custom house.
        - Treasure delivered by king.
        - Treasure brought to europe.

      Threshold: 1800.  When it gets to this value it wraps around
      and one unit is added.

    The algo used to select which unit gets added appears to have
    the following properties:

      * Not random.
      * Tends toward fixed distribution:

        Unit       PC/total  PC/land
        -------------------------------------------------
        regulars:  (57.4%)   (63.1%)
        cavalry:   (19.1%)   (21.0%)
        artillery: (14.3%)   (15.7%)
        ships:     ( 9.0%)   (-----)

      * In order to have just the right number of ships to trans-
        port all of the ground units without reusing any ships we
        would need to have the ships percentage at 1/7 (~14%).
        However, in practice it is always less than this. Maybe a
        reason for this is that it allows a strategy where at-
        tacking ships can end the war early by causing the REF to
        run out of transport ships. But either way, we will keep
        this.

  * We need to warn the player when the number of rebels of for-
    eign powers rises and they get closer to declaring.

  * When independence is declared, the player's turn immediately
    ends. It appears that the ref moves last after all nations.
    Moreover, during the same turn as independence is declared,
    the king's army appears to use its turn to land, but does not
    attack. Then, at the start of the next turn, some messages
    are shown, then armies are promoted, then a normal turn pro-
    ceeds where the player gets to move, then the ref.

  * Also when it reaches 50%, the OG consolidates two of the AI
    players: according to the SG, the smallest one is ceded into
    the second smallest. If we do this, we need to determine how
    to handle rebel sentiment in the two that are merged. We
    don't want the merge to automatically trigger then declaring
    independence, since that'd be strange.

  * Need to determine if/how rebel sentiment affects the build up
    of ref forces.

  * Rebel sentiment contributes to the final score.

  * According to the SG, AI players will declare independence
    when they reach a certain number of rebels (i.e., it is not
    based on percent but on number of rebels):

        Discoverer:   80
        Explorer:     70
        Conquistador: 60
        Governor:     50
        Viceroy:      40

    Since this is based on absolute numbers of rebels and not
    rebel percentages (like it is for the human player) it is
    possible to prevent the AI from declaring independence just
    by attacking them to keep their nations small.

    This is an important case of how the rules differ for human
    vs. AI players. The cheat mode feature that allows switching
    the human player needs to handle this properly, i.e. if the
    human player has more rebels than the threshold for an AI
    player to declare independence, and then the human player is
    changed, the original player (which is now AI) will immedi-
    ately declare independence.

Done:

  * The sav file has one top-level field for rebel sentiment and
    then one in each nation. The top-level one seems to always be
    the same as the one for the human player.

  * Rebel sentiment percent is given by:

                                  sum( SoL percent*population, colonies )
      rebel_percent = floor(  100*--------------------------------------- )
                                       total colonies population

  * Rebel sentiment spreads shown on the continental congress re-
    port are:

      rebel_count = rebel_percent*total_colonists (rounded down)
      tory_count  = total_colonies-rebel_count

    where the `total_colonists` is the total number of human
    colonists that the player has in the game, including:
      * native converts
      * human military units
      * units on the dock
    but not e.g. artillery or treasure units.

  * There are messages that inform the player of when rebel sen-
    timent rises and falls, similar to the SoL messages. However,
    they are only shown when the total population is >= 4, and
    that includes all human units both in colonies, on the map,
    or on the dock, i.e. the `total_colonists` variable below.

  * When rebel sentiment goes down, the message says "tory senti-
    ment is on the rise".

  * When it reaches 50%, independence can be declared.

  * Computed once at the start of each turn, AFTER colonies are
    evolved. This ordering matters. The OG does it this way, and
    anyway is needed so that the number shown on the report is
    consistent with what is in the colonies for SoL.
